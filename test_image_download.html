<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片下载功能测试页</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .test-container {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-image {
            margin: 10px;
            max-width: 300px;
            height: auto;
        }
        .large-image {
            width: 200px;
            height: 150px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        }
        .small-image {
            width: 30px;
            height: 30px;
            background: linear-gradient(45deg, #74b9ff, #0984e3);
        }
    </style>
</head>
<body>
    <h1>NWS Tools 图片下载功能测试</h1>
    
    <div class="test-container">
        <h2>测试说明</h2>
        <p>如果图片下载功能正常工作，您应该看到：</p>
        <ul>
            <li>页面左上角显示功能状态（启用/禁用）</li>
            <li>鼠标悬停在大图片上时，右上角出现下载按钮</li>
            <li>小图片（小于50x50）不会显示下载按钮</li>
            <li>浏览器控制台有详细的调试信息</li>
        </ul>
    </div>

    <div class="test-container">
        <h3>测试图片1: 大图片（应该显示下载按钮）</h3>
        <img src="https://picsum.photos/200/150" alt="测试图片1" class="test-image">
    </div>

    <div class="test-container">
        <h3>测试图片2: 另一张大图片</h3>
        <img src="https://picsum.photos/250/200" alt="测试图片2" class="test-image">
    </div>

    <div class="test-container">
        <h3>测试图片3: CSS背景大图片</h3>
        <div class="large-image test-image"></div>
    </div>

    <div class="test-container">
        <h3>测试图片4: 小图片（不应该显示下载按钮）</h3>
        <div class="small-image test-image"></div>
        <img src="https://picsum.photos/40/40" alt="小测试图片" style="width:40px;height:40px;margin:10px;">
    </div>

    <div class="test-container">
        <h3>本地图片测试</h3>
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='100' viewBox='0 0 150 100'%3E%3Crect width='150' height='100' fill='%2374b9ff'/%3E%3Ctext x='75' y='50' text-anchor='middle' dy='.3em' fill='white' font-family='Arial, sans-serif'%3E测试图片%3C/text%3E%3C/svg%3E" alt="SVG测试图片" class="test-image">
    </div>

    <script>
        // 添加一些动态图片来测试 MutationObserver
        setTimeout(() => {
            const container = document.createElement('div');
            container.className = 'test-container';
            container.innerHTML = `
                <h3>动态加载的图片</h3>
                <img src="https://picsum.photos/180/120" alt="动态图片" class="test-image">
            `;
            document.body.appendChild(container);
        }, 3000);

        // 显示控制台信息提示
        console.log('=== 图片下载功能测试页面 ===');
        console.log('请查看以下调试信息来确认功能状态：');
        console.log('1. [ImageDownloader] 开始加载设置');
        console.log('2. [ImageDownloader] 功能状态: true/false');
        console.log('3. [ImageDownloader] 找到图片数量: X');
        console.log('4. [ImageDownloader] 鼠标进入容器，显示按钮');
    </script>
</body>
</html>